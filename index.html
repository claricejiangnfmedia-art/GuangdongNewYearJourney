<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å¹¿åºœå¹´å‘³ä¹‹æ—… | Guangdong New Year Journey</title>
    <style>
        /* åŸºç¡€æ ·å¼ - å®Œå…¨ä¸å˜ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(180deg, #ff6b6b 0%, #ffd93d 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .game-container {
            width: 100%;
            max-width: 400px;
            height: 85vh;
            background: white;
            border-radius: 25px;
            overflow: hidden;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
            position: relative;
        }
        
        .page {
            width: 100%;
            height: 100%;
            display: none;
            position: absolute;
            top: 0;
            left: 0;
        }
        
        .page.active {
            display: block;
        }
        
        /* ============ åªä¿®æ”¹å¼€å±é¡µé¢çš„æ’ç‰ˆå’Œé¢œè‰² ============ */
        #languagePage {
            position: relative;
            background: linear-gradient(135deg, #c1272d 0%, #ff6b6b 100%);
        }
        
        #bgImage {
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: brightness(1) !important;
            opacity: 1 !important;
        }
        
        .language-content {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 30px;
            text-align: center;
            background: linear-gradient(
                180deg, 
                rgba(255, 215, 0, 0.3) 0%, 
                rgba(255, 107, 107, 0.2) 50%,
                rgba(193, 39, 45, 0.3) 100%
            );
        }
        
        /* ä¿®å¤1ï¼šä¼˜åŒ–ä¸»æ ‡é¢˜æ’ç‰ˆå’Œé¢œè‰² */
        .language-title {
            color: #ffd700 !important;  /* é‡‘è‰² */
            font-size: 36px;  /* ç¨å¾®è°ƒå°ä¸€ç‚¹ */
            margin-bottom: 15px;  /* å¢åŠ ä¸‹è¾¹è· */
            text-shadow: 3px 3px 0 rgba(193, 39, 45, 0.9);
            font-weight: bold;
            line-height: 1.2;  /* ä¼˜åŒ–è¡Œé«˜ */
            padding: 0 20px;  /* ä¸¤ä¾§ç•™ç™½ */
        }
        
        .language-title span {
            display: block;
            font-size: 24px;  /* è‹±æ–‡å°ä¸€ç‚¹ */
            margin-top: 10px;
            color: white;  /* è‹±æ–‡ç”¨ç™½è‰² */
            text-shadow: 2px 2px 0 rgba(193, 39, 45, 0.8);
            font-weight: 600;
        }
        
        /* ä¿®å¤2ï¼šä¼˜åŒ–å‰¯æ ‡é¢˜æ’ç‰ˆ */
        .language-subtitle {
            color: white !important;
            font-size: 18px;
            margin-bottom: 50px;
            text-shadow: 1px 1px 2px rgba(193, 39, 45, 0.9);
            background: rgba(193, 39, 45, 0.7);
            padding: 12px 25px;
            border-radius: 20px;
            line-height: 1.5;  /* ä¼˜åŒ–è¡Œé«˜ */
            max-width: 320px;  /* é™åˆ¶æœ€å¤§å®½åº¦ */
        }
        
        /* ä¿®å¤3ï¼šä¼˜åŒ–æŒ‰é’®åŒºåŸŸé—´è· */
        .language-buttons {
            display: flex;
            flex-direction: column;
            gap: 20px;
            width: 100%;
            max-width: 280px;
            margin-bottom: 40px;  /* å¢åŠ ä¸‹è¾¹è· */
        }
        
        /* ä¿®å¤4ï¼šæŒ‰é’®æ–‡å­—é¢œè‰²ç”¨important */
        .language-btn {
            padding: 20px;
            font-size: 1.2rem;
            border: none;
            border-radius: 50px;
            background: rgba(255, 255, 255, 0.95);
            color: #c1272d !important;  /* é‡è¦ï¼çº¢è‰²æ–‡å­— */
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            box-shadow: 0 10px 25px rgba(193, 39, 45, 0.4);
        }
        
        .language-btn:active {
            transform: scale(0.95);
            background: white;
        }
        
        /* ä¿®å¤5ï¼šä¼˜åŒ–åº•éƒ¨æç¤ºæ’ç‰ˆ */
        .language-hint {
            margin-top: 20px;  /* å‡å°‘ä¸Šè¾¹è· */
            color: #ffd700;
            font-size: 18px;  /* åŠ å¤§ä¸€ç‚¹ */
            text-shadow: 1px 1px 0 #c1272d;
            background: rgba(193, 39, 45, 0.6);  /* åŠ èƒŒæ™¯ */
            padding: 12px 20px;
            border-radius: 15px;
            border: 2px solid #ffd700;
            max-width: 300px;
        }
        
        .language-hint p {
            margin: 0 0 8px 0;
            font-weight: bold;
        }
        
        .language-hint span {
            display: block;
            font-size: 14px;
            color: white;
            opacity: 0.95;
            line-height: 1.4;
        }
        
        /* ============ ä»¥ä¸‹æ‰€æœ‰CSSä¿æŒåŸæ ·ï¼Œå®Œå…¨ä¸å˜ ============ */
        #gamePage {
            background: #fffaf0;
        }
        
        .scene-area {
            height: 60%;
            position: relative;
            overflow: hidden;
        }
        
        #sceneImage {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .scene-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.7));
            color: white;
            padding: 20px;
            min-height: 150px;
        }
        
        #sceneTitle {
            color: #ffd700;
            font-size: 1.4rem;
            margin-bottom: 10px;
        }
        
        #sceneText {
            font-size: 1rem;
            line-height: 1.5;
            margin-bottom: 10px;
        }
        
        #cantoneseText {
            font-style: italic;
            color: #a8e6cf;
            border-left: 3px solid #a8e6cf;
            padding-left: 10px;
            margin-top: 10px;
            font-size: 0.9rem;
        }
        
        .options-area {
            height: 30%;
            padding: 15px;
            overflow-y: auto;
            background: #fff9e6;
        }
        
        .option-btn {
            width: 100%;
            padding: 16px;
            margin-bottom: 12px;
            background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            text-align: left;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }
        
        .option-btn:active {
            transform: translateY(3px);
        }
        
        .status-bar {
            height: 10%;
            background: rgba(255, 255, 255, 0.95);
            display: flex;
            justify-content: space-around;
            align-items: center;
            border-top: 2px solid #ff9a9e;
            padding: 0 10px;
        }
        
        .status-item {
            text-align: center;
        }
        
        .status-value {
            font-size: 1.2rem;
            color: #c1272d;
            font-weight: bold;
        }
        
        .status-label {
            font-size: 0.75rem;
            color: #666;
        }
        
        #fortunePage {
            background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
            padding: 20px;
            text-align: center;
            overflow-y: auto;
        }
        
        #fortuneTitle {
            color: #c1272d;
            font-size: 1.8rem;
            margin-bottom: 20px;
        }
        
        #fortuneImage {
            width: 100%;
            max-width: 300px;
            height: 200px;
            object-fit: cover;
            border-radius: 15px;
            border: 5px solid #ffd700;
            margin: 0 auto 20px;
            display: block;
        }
        
        .fortune-text {
            background: white;
            padding: 20px;
            border-radius: 15px;
            margin: 0 auto 20px;
            max-width: 350px;
            font-size: 1.1rem;
            color: #333;
        }
        
        .action-btn {
            width: 200px;
            padding: 15px;
            margin: 8px;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            display: block;
            margin-left: auto;
            margin-right: auto;
        }
        
        #shareBtn {
            background: linear-gradient(135deg, #4CAF50, #2E7D32);
            color: white;
        }
        
        #retryBtn {
            background: linear-gradient(135deg, #2196F3, #0D47A1);
            color: white;
        }
        
        #homeBtn {
            background: linear-gradient(135deg, #9C27B0, #6A1B9A);
            color: white;
        }
        
        .qrcode-section {
            background: white;
            padding: 15px;
            border-radius: 15px;
            margin-top: 20px;
            max-width: 350px;
            margin-left: auto;
            margin-right: auto;
        }
        
        #qrcodeImg {
            width: 150px;
            height: 150px;
            margin: 10px auto;
            display: block;
            border: 2px solid #ff9a9e;
        }
        
        #message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.85);
            color: white;
            padding: 20px 30px;
            border-radius: 15px;
            display: none;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <!-- æ¶ˆæ¯æç¤º -->
    <div id="message"></div>
    
    <!-- æ¸¸æˆå®¹å™¨ -->
    <div class="game-container">
        <!-- è¯­è¨€é€‰æ‹©é¡µé¢ - ä¿®æ”¹HTMLç»“æ„ -->
        <div id="languagePage" class="page active">
            <img id="bgImage" alt="æ–°æ˜¥èƒŒæ™¯å›¾">
            <div class="language-content">
                <!-- ä¼˜åŒ–æ’ç‰ˆç»“æ„ -->
                <div style="margin-bottom: 30px;">
                    <h1 class="language-title">
                        å¹¿åºœå¹´å‘³ä¹‹æ—…
                        <span>Guangdong New Year Journey</span>
                    </h1>
                </div>
                
                <p class="language-subtitle">
                    ä½“éªŒå¹¿ä¸œæ˜¥èŠ‚ä¼ ç»Ÿä¹ ä¿—<br>
                    Experience Cantonese New Year Traditions
                </p>
                
                <div class="language-buttons">
                    <button id="chineseBtn" class="language-btn">ğŸ‡¨ğŸ‡³ ä¸­æ–‡ç‰ˆ</button>
                    <button id="englishBtn" class="language-btn">ğŸŒ English Version</button>
                </div>
                
                <div class="language-hint">
                    <p>ğŸ´ é©¬å¹´ç‰¹åˆ«ç‰ˆ ğŸ‰</p>
                    <span>ä»å¹´å»¿å…«åˆ°å…ƒå®µèŠ‚ï¼Œä½“éªŒå®Œæ•´å¹¿ä¸œå¹´ä¿—</span>
                </div>
            </div>
        </div>
        
        <!-- ä»¥ä¸‹æ‰€æœ‰HTMLä¿æŒåŸæ ·ï¼Œå®Œå…¨ä¸å˜ -->
        <div id="gamePage" class="page">
            <div class="scene-area">
                <img id="sceneImage" alt="åœºæ™¯å›¾">
                <div class="scene-overlay">
                    <h3 id="sceneTitle">åœºæ™¯æ ‡é¢˜</h3>
                    <p id="sceneText">åœºæ™¯æè¿°å†…å®¹...</p>
                    <div id="cantoneseText"></div>
                </div>
            </div>
            <div class="options-area" id="optionsArea"></div>
            <div class="status-bar">
                <div class="status-item">
                    <div class="status-value" id="currentDay">å¹´å»¿å…«</div>
                    <div class="status-label" id="dayLabel">å½“å‰æ—¥æœŸ</div>
                </div>
                <div class="status-item">
                    <div class="status-value" id="luckValue">88</div>
                    <div class="status-label" id="luckLabel">å¥½è¿å€¼</div>
                </div>
                <div class="status-item">
                    <div class="status-value" id="moneyValue">Â¥0</div>
                    <div class="status-label" id="moneyLabel">åˆ©æ˜¯é’±</div>
                </div>
            </div>
        </div>
        
        <div id="fortunePage" class="page">
            <h2 id="fortuneTitle">é©¬å¹´å¥½è¿ç­¾</h2>
            <img id="fortuneImage" alt="å¥½è¿ç­¾å›¾ç‰‡">
            <div class="fortune-text">
                <p id="fortuneText">æ­£åœ¨æŠ½å–æ‚¨çš„æ–°å¹´å¥½è¿ç­¾...</p>
                <p id="fortuneEnglish"></p>
            </div>
            <button id="shareBtn" class="action-btn">åˆ†äº«å¥½è¿</button>
            <button id="retryBtn" class="action-btn">å†æŠ½ä¸€æ¬¡</button>
            <button id="homeBtn" class="action-btn">è¿”å›é¦–é¡µ</button>
            <div class="qrcode-section">
                <h4 id="qrcodeTitle">ğŸ“± åˆ†äº«æ¸¸æˆç»™æœ‹å‹</h4>
                <img id="qrcodeImg" alt="äºŒç»´ç ">
                <p id="qrcodeHint">æ‰«ç ä¸€èµ·ä½“éªŒå¹¿åºœå¹´å‘³ï¼</p>
            </div>
        </div>
    </div>

    <script>
        // ==================== æ¸¸æˆé…ç½® ====================
        const game = {
            language: 'zh',
            currentScene: 0,
            luck: 88,
            money: 0,
            happiness: 100
        };

        // ==================== å›¾ç‰‡é…ç½® ====================
        const gameImages = {
            languageBg: "images/å¼€å±å›¾å»æ°´å° (1).png",
            scenes: [
                "images/å¹´28æ‰“æ‰«å›¾å»æ°´å°.png",
                "images/å¹´30è¡ŒèŠ±è¡—å›¾å»æ°´å° (1).png", 
                "images/å¹´åˆä¸€å›¢å¹´é¥­å›¾å»æ°´å°.png",
                "images/å…ƒå®µèŠ‚é€—åˆ©æ˜¯å›¾å»æ°´å°.png"
            ],
            fortunes: [
                {
                    image: "images/æ–°å¹´ç­¾é©¬åˆ°æˆåŠŸå›¾å»æ°´å°.png",
                    text: {
                        zh: "é©¬åˆ°æˆåŠŸï¼Œäº‹ä¸šè…¾é£ï¼æ–°ä¸€å¹´å¦‚éªé©¬å¥”è…¾ï¼Œå‹‡å¾€ç›´å‰ï¼Œæ‰€æœ‰ç›®æ ‡éƒ½èƒ½é¡ºåˆ©è¾¾æˆï¼",
                        en: "Success comes with the horse! May your career soar like a galloping steed!"
                    }
                },
                {
                    image: "images/æ–°å¹´ç­¾è´¢è¿äº¨é€šå›¾å»æ°´å° (1).png",
                    text: {
                        zh: "è´¢è¿äº¨é€šï¼Œåˆ©æ˜¯å¤šå¤šï¼æ­£è´¢åè´¢ä¸€é½æ¥ï¼Œé“¶è¡Œå­˜æ¬¾èŠ‚èŠ‚é«˜ï¼",
                        en: "Wealth flows freely! May prosperity find you from all directions!"
                    }
                },
                {
                    image: "images/æ–°å¹´ç­¾æ¡ƒèŠ±ç››å¼€å›¾å»æ°´å°.png",
                    text: {
                        zh: "æ¡ƒèŠ±ç››å¼€ï¼Œå§»ç¼˜ç¾æ»¡ï¼å•èº«é‡è‰¯ç¼˜ï¼Œæœ‰æƒ…äººç»ˆæˆçœ·å±ï¼",
                        en: "Love blossoms! May you find your perfect match or deepen existing bonds!"
                    }
                },
                {
                    image: "images/æ–°å¹´ç­¾å®¶åº­å’Œç¦å›¾å»æ°´å°.png",
                    text: {
                        zh: "å®¶åº­å’Œç¦ï¼Œå¹¸ç¦å®‰åº·ï¼å®¶äººå¥åº·å¿«ä¹ï¼Œå›¢åœ†ç¾æ»¡ï¼",
                        en: "Family harmony and good health! May your home be filled with joy!"
                    }
                }
            ],
            qrcode: "images/åˆ†äº«äºŒç»´ç .png"
        };

        // ==================== æ¸¸æˆæ•°æ® ====================
        const gameData = {
            zh: {
                languageTitle: "å¹¿åºœå¹´å‘³ä¹‹æ—…",
                languageSubtitle: "ä½“éªŒå¹¿ä¸œæ˜¥èŠ‚ä¼ ç»Ÿä¹ ä¿—",
                days: ["å¹´å»¿å…«", "å¹´ä¸‰å", "å¹´åˆä¸€", "å…ƒå®µèŠ‚"],
                dayLabel: "å½“å‰æ—¥æœŸ",
                luckLabel: "å¥½è¿å€¼", 
                moneyLabel: "åˆ©æ˜¯é’±",
                fortuneTitle: "é©¬å¹´å¥½è¿ç­¾",
                shareText: "åˆ†äº«å¥½è¿",
                retryText: "å†æŠ½ä¸€æ¬¡",
                homeText: "è¿”å›é¦–é¡µ",
                qrcodeTitle: "ğŸ“± åˆ†äº«æ¸¸æˆç»™æœ‹å‹",
                qrcodeHint: "æ‰«ç ä¸€èµ·ä½“éªŒå¹¿åºœå¹´å‘³ï¼",
                scenes: [
                    {
                        title: "ğŸ§¹ æ´—é‚‹é¢è¿æ–°æ˜¥",
                        text: "å¹´å»¿å…«çš„é˜³å…‰é€è¿‡æ»¡æ´²çª—ï¼Œæ´’åœ¨è¥¿å…³å¤§å±‹çš„é’ç –å¢™ä¸Šã€‚ä»Šå¤©æ˜¯'æ´—é‚‹é¢'çš„æ—¥å­ï¼Œè¦æŠŠå®¶é‡Œæ‰“æ‰«å¾—å¹²å¹²å‡€å‡€è¿æ–°å¹´ã€‚",
                        cantonese: "é˜¿å¦ˆè¯ï¼š'å¹´å»¿å…«ï¼Œæ´—é‚‹é¢ï¼Œæ´—åŸ‹è¡°æ°”å¥½è¿æ¥ï¼'",
                        options: [
                            { text: "ğŸ§¹ å¸®å¿™æ‰“æ‰«ç¥å°", result: "è®¤çœŸæ“¦æ‹­ç¥–å…ˆç‰Œä½ï¼Œè·å¾—é•¿è¾ˆèµèµ", luck: 10, happiness: 5 },
                            { text: "ğŸƒ ç”¨æŸšå¶æ°´æŠ¹é—¨çª—", result: "æŸšå¶æ¸…é¦™æ»¡å±‹ï¼Œé©±é™¤éœ‰è¿", luck: 15 },
                            { text: "ğŸ æ•´ç†å¹´èŠ±æ‘†è®¾", result: "å°†å¹´æ¡”ã€æ¡ƒèŠ±æ‘†åˆ°åˆé€‚ä½ç½®ï¼Œå®¶é‡Œç„•ç„¶ä¸€æ–°", happiness: 10 }
                        ]
                    },
                    {
                        title: "ğŸ® è¡ŒèŠ±è¡—ä¹°å¹´èŠ±",
                        text: "å‚æ™šçš„èŠ±å¸‚äººæ½®æ¶ŒåŠ¨ï¼Œéœ“è™¹ç¯æ˜ ç…§ç€å„è‰²å¹´èŠ±ã€‚ç©ºæ°”ä¸­å¼¥æ¼«ç€æ¡ƒèŠ±é¦™å’Œå¹´æ¡”çš„æ¸…æ–°æ°”æ¯ã€‚",
                        cantonese: "è¡ŒèŠ±è¡—ï¼Œè½¬å¤§è¿ï¼ä¹°æ”¯æ¡ƒèŠ±æ—ºå§»ç¼˜ï¼",
                        options: [
                            { text: "ğŸŒ¸ ä¹°ä¸€æ ªæ¡ƒèŠ±", result: "èŠ±å†œè¯´ï¼š'åç”Ÿä»”ï¼Œä»Šå¹´è¡Œæ¡ƒèŠ±è¿å•¦ï¼'", luck: 20, money: -50 },
                            { text: "ğŸŠ ä¹°ç›†å¹´æ¡”", result: "é‡‘æ¡”æ»¡æå¤´ï¼Œå¯“æ„å¤§å‰å¤§åˆ©", luck: 15, money: -30 },
                            { text: "ğŸš¶ åªçœ‹ä¸ä¹°ï¼Œæ„Ÿå—æ°”æ°›", result: "åœ¨èŠ±å¸‚é‡Œé—²é€›ï¼Œæ¬£èµå„ç§å¹´èŠ±å’Œåˆ›æ„äº§å“", happiness: 10 }
                        ]
                    },
                    {
                        title: "ğŸ¥˜ å›¢å¹´é¥­ç››å®´",
                        text: "å…¨å®¶äººå›´åä¸€å ‚ï¼Œæ¡Œä¸Šæ‘†æ»¡äº†å¹¿åºœç‰¹è‰²å¹´èœï¼šç™½åˆ‡é¸¡ã€çƒ§é¹…ã€å‘èœèšè±‰ã€æ¸…è’¸é±¼...é˜¿å«²æ­£åœ¨ç››è€ç«é“æ±¤ã€‚",
                        cantonese: "é˜¿å«²è¯ï¼š'é¥®å•–æ±¤å…ˆï¼Œå¥½è¶³æ–™å˜ï¼'",
                        options: [
                            { text: "ğŸ¥¢ å¸®å¿™æ‘†ç¢—ç­·", result: "æŒ‰ç…§é•¿å¹¼é¡ºåºæ‘†å¥½ç¢—ç­·ï¼Œé˜¿å…¬ç‚¹å¤´èµè®¸", luck: 5, happiness: 8 },
                            { text: "ğŸ å­¦åŒ…æ²¹è§’", result: "é˜¿å¦ˆæ•™ä½ åŒ…æ²¹è§’ï¼Œè™½ç„¶å½¢çŠ¶ä¸å¤ªå¥½çœ‹ï¼Œä½†å¾ˆæœ‰å¹´å‘³", happiness: 15 },
                            { text: "ğŸ² å¸®å¿™å‡†å¤‡ç›†èœ", result: "å°†é²é±¼ã€é¹…æŒã€èŠ±è‡ç­‰é£Ÿæä¸€å±‚å±‚é“ºå¥½", luck: 10 }
                        ]
                    },
                    {
                        title: "ğŸ§§ æ‹œå¹´é€—åˆ©æ˜¯",
                        text: "ç©¿ä¸Šå…¨æ–°çš„å”è£…è¡«è£¤ï¼Œå‡†å¤‡å‡ºé—¨æ‹œå¹´ã€‚é˜¿çˆ¸é€’ç»™ä½ ä¸€å åˆ©æ˜¯å°ï¼š'è§åˆ°é•¿è¾ˆè¦è®²æ­å–œå‘è´¢å•Šï¼'",
                        cantonese: "ç»†è·¯ä»”æœ€å¼€å¿ƒå°±ç³»é€—åˆ©æ˜¯å•¦ï¼",
                        options: [
                            { text: "ğŸ¡ å»é˜¿å…¬é˜¿å«²å®¶æ‹œå¹´", result: "é˜¿å…¬ç»™ä½ å¤§åˆ©æ˜¯ï¼Œè¿˜å‡†å¤‡äº†ç“œå­ç³–æœ", money: 200, happiness: 10 },
                            { text: "ğŸ® è·Ÿçˆ¸å¦ˆå»èŒ¶æ¥¼", result: "èŒ¶æ¥¼äººå£°é¼æ²¸ï¼Œä¸€ç›…ä¸¤ä»¶ï¼Œæ­å–œå£°ä¸ç»", money: 100, happiness: 15 },
                            { text: "ğŸ¦ çœ‹èˆç‹®è¡¨æ¼”", result: "é”£é¼“å–§å¤©ï¼Œé†’ç‹®é‡‡é’ï¼Œçƒ­é—¹éå‡¡", luck: 20, happiness: 20 }
                        ]
                    }
                ]
            },
            en: {
                languageTitle: "Guangdong New Year Journey",
                languageSubtitle: "Experience Cantonese New Year Traditions",
                days: ["Day 28", "New Year's Eve", "Day 1", "Lantern Festival"],
                dayLabel: "Current Day",
                luckLabel: "Luck Points", 
                moneyLabel: "Red Packets",
                fortuneTitle: "Year of the Horse Fortune",
                shareText: "Share Fortune",
                retryText: "Draw Again",
                homeText: "Back to Home",
                qrcodeTitle: "ğŸ“± Share with Friends",
                qrcodeHint: "Scan QR code to play together!",
                scenes: [
                    {
                        title: "ğŸ§¹ Spring Cleaning Day",
                        text: "Morning sunlight shines through the traditional windows. It's time for thorough cleaning to welcome the New Year!",
                        cantonese: "",
                        options: [
                            { text: "ğŸ§¹ Clean the altar", result: "Earn praise from elders for cleaning carefully", luck: 10, happiness: 5 },
                            { text: "ğŸƒ Wipe with pomelo leaves", result: "Fresh scent fills the room, driving away bad luck", luck: 15 },
                            { text: "ğŸ Arrange New Year plants", result: "Place mandarin orange tree and peach blossoms beautifully", happiness: 10 }
                        ]
                    },
                    {
                        title: "ğŸ® Flower Market Visit",
                        text: "The flower market is bustling with people under neon lights. Scents of peach blossoms fill the air.",
                        cantonese: "",
                        options: [
                            { text: "ğŸŒ¸ Buy peach blossoms", result: "The florist smiles: 'Good luck in love this year!'", luck: 20, money: -50 },
                            { text: "ğŸŠ Buy kumquat tree", result: "Golden fruits symbolize prosperity and good fortune", luck: 15, money: -30 },
                            { text: "ğŸš¶ Just enjoy the atmosphere", result: "Wander through the market, enjoying festive vibes", happiness: 10 }
                        ]
                    },
                    {
                        title: "ğŸ¥˜ Reunion Dinner Feast",
                        text: "The whole family gathers around a table filled with Cantonese New Year dishes... Grandma serves hot soup.",
                        cantonese: "",
                        options: [
                            { text: "ğŸ¥¢ Set the table", result: "Arrange dishes properly, earning approval from elders", luck: 5, happiness: 8 },
                            { text: "ğŸ Learn to make dumplings", result: "Mom teaches you traditional recipes", happiness: 15 },
                            { text: "ğŸ² Prepare Poon Choi", result: "Layer abalone, mushrooms and other ingredients", luck: 10 }
                        ]
                    },
                    {
                        title: "ğŸ§§ Red Packets Day",
                        text: "Dressed in new traditional clothes, ready for visiting. Red packets (lai see) await!",
                        cantonese: "",
                        options: [
                            { text: "ğŸ¡ Visit grandparents", result: "Receive big red packets with blessings", money: 200, happiness: 10 },
                            { text: "ğŸ® Go to tea house", result: "Experience festive atmosphere with family", money: 100, happiness: 15 },
                            { text: "ğŸ¦ Watch lion dance", result: "Exciting performance with drums and colors", luck: 20, happiness: 20 }
                        ]
                    }
                ]
            }
        };

        // ==================== åˆå§‹åŒ– ====================
        function init() {
            console.log("æ¸¸æˆåˆå§‹åŒ–...");
            
            // åŠ è½½èƒŒæ™¯å›¾
            const bgImg = document.getElementById('bgImage');
            bgImg.src = gameImages.languageBg;
            bgImg.onerror = function() {
                console.log("èƒŒæ™¯å›¾åŠ è½½å¤±è´¥ï¼Œä½¿ç”¨å–œåº†èƒŒæ™¯");
                document.getElementById('languagePage').style.background = 'linear-gradient(135deg, #c1272d 0%, #ff6b6b 100%)';
                bgImg.style.display = 'none';
            };
            
            // åŠ è½½äºŒç»´ç 
            const qrImg = document.getElementById('qrcodeImg');
            qrImg.src = gameImages.qrcode;
            qrImg.onerror = function() {
                console.log("äºŒç»´ç åŠ è½½å¤±è´¥");
                qrImg.parentNode.innerHTML = '<div style="font-size: 60px; color: #c1272d; text-align:center;">ğŸ“±</div>';
            };
            
            // ç»‘å®šæŒ‰é’®äº‹ä»¶
            document.getElementById('chineseBtn').addEventListener('click', function() {
                startGame('zh');
            });
            
            document.getElementById('englishBtn').addEventListener('click', function() {
                startGame('en');
            });
            
            document.getElementById('shareBtn').addEventListener('click', shareFortune);
            document.getElementById('retryBtn').addEventListener('click', drawFortune);
            document.getElementById('homeBtn').addEventListener('click', backToHome);
            
            console.log("åˆå§‹åŒ–å®Œæˆ");
        }

        // ==================== å¼€å§‹æ¸¸æˆ ====================
        function startGame(lang) {
            console.log("å¼€å§‹æ¸¸æˆï¼Œè¯­è¨€:", lang);
            
            game.language = lang;
            game.currentScene = 0;
            game.luck = 88;
            game.money = 0;
            game.happiness = 100;
            
            // æ›´æ–°ç•Œé¢è¯­è¨€ - ä¿®å¤ï¼šä¸è¦†ç›–å¼€å±æ ‡é¢˜é¢œè‰²
            updateLanguageUI();
            
            // åˆ‡æ¢é¡µé¢
            document.getElementById('languagePage').classList.remove('active');
            document.getElementById('gamePage').classList.add('active');
            document.getElementById('fortunePage').classList.remove('active');
            
            // åŠ è½½ç¬¬ä¸€ä¸ªåœºæ™¯
            loadScene();
        }

        // ==================== æ›´æ–°ç•Œé¢è¯­è¨€ ====================
        function updateLanguageUI() {
            const langData = gameData[game.language];
            
            // é‡è¦ï¼šä¸å†åŠ¨æ€æ›´æ–°å¼€å±æ ‡é¢˜ï¼Œå› ä¸ºå·²ç»åœ¨HTMLé‡Œå†™å¥½äº†
            // åªæ›´æ–°æ¸¸æˆå†…çš„æ–‡æœ¬
            
            // æ›´æ–°çŠ¶æ€æ 
            document.getElementById('dayLabel').textContent = langData.dayLabel;
            document.getElementById('luckLabel').textContent = langData.luckLabel;
            document.getElementById('moneyLabel').textContent = langData.moneyLabel;
            
            // æ›´æ–°æ–°å¹´ç­¾é¡µé¢
            document.getElementById('fortuneTitle').textContent = langData.fortuneTitle;
            document.getElementById('shareBtn').textContent = langData.shareText;
            document.getElementById('retryBtn').textContent = langData.retryText;
            document.getElementById('homeBtn').textContent = langData.homeText;
            document.getElementById('qrcodeTitle').textContent = langData.qrcodeTitle;
            document.getElementById('qrcodeHint').textContent = langData.qrcodeHint;
            
            // æ ¹æ®è¯­è¨€æ›´æ–°å¼€å±æŒ‰é’®æ–‡æœ¬
            const chineseBtn = document.getElementById('chineseBtn');
            const englishBtn = document.getElementById('englishBtn');
            
            if (game.language === 'zh') {
                // ä¸­æ–‡ç‰ˆï¼šæŒ‰é’®ä¿æŒä¸­æ–‡
                chineseBtn.textContent = 'ğŸ‡¨ğŸ‡³ ä¸­æ–‡ç‰ˆ';
                englishBtn.textContent = 'ğŸŒ English Version';
            } else {
                // è‹±æ–‡ç‰ˆï¼šæŒ‰é’®æ˜¾ç¤ºè‹±æ–‡
                chineseBtn.textContent = 'ğŸ‡¨ğŸ‡³ Chinese';
                englishBtn.textContent = 'ğŸŒ English';
            }
        }

        // ==================== åŠ è½½åœºæ™¯ ====================
        function loadScene() {
            const langData = gameData[game.language];
            const scenes = langData.scenes;
            
            if (game.currentScene >= scenes.length) {
                showFortunePage();
                return;
            }
            
            const scene = scenes[game.currentScene];
            
            // æ›´æ–°åœºæ™¯å†…å®¹
            document.getElementById('sceneTitle').textContent = scene.title;
            document.getElementById('sceneText').textContent = scene.text;
            document.getElementById('currentDay').textContent = langData.days[game.currentScene];
            
            // æ›´æ–°ç²¤è¯­æ–‡æœ¬
            const cantoneseEl = document.getElementById('cantoneseText');
            if (scene.cantonese) {
                cantoneseEl.textContent = scene.cantonese;
                cantoneseEl.style.display = 'block';
            } else {
                cantoneseEl.style.display = 'none';
            }
            
            // åŠ è½½åœºæ™¯å›¾ç‰‡
            const sceneImg = document.getElementById('sceneImage');
            if (game.currentScene < gameImages.scenes.length) {
                sceneImg.src = gameImages.scenes[game.currentScene];
                sceneImg.onerror = function() {
                    console.log("åœºæ™¯å›¾åŠ è½½å¤±è´¥");
                    sceneImg.style.display = 'none';
                };
                sceneImg.style.display = 'block';
            }
            
            // åˆ›å»ºé€‰é¡¹æŒ‰é’®
            const optionsArea = document.getElementById('optionsArea');
            optionsArea.innerHTML = '';
            
            scene.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'option-btn';
                button.innerHTML = option.text;
                
                button.addEventListener('click', function() {
                    showMessage(option.result);
                    
                    // æ›´æ–°æ¸¸æˆçŠ¶æ€
                    if (option.luck) game.luck += option.luck;
                    if (option.money) game.money += option.money;
                    if (option.happiness) game.happiness += option.happiness;
                    
                    // ç¡®ä¿æ•°å€¼ä¸ä¸ºè´Ÿ
                    game.luck = Math.max(0, game.luck);
                    game.money = Math.max(0, game.money);
                    game.happiness = Math.max(0, game.happiness);
                    
                    updateStatus();
                    
                    // æŒ¯åŠ¨åé¦ˆ
                    if (navigator.vibrate) {
                        navigator.vibrate(50);
                    }
                    
                    // è¿›å…¥ä¸‹ä¸€ä¸ªåœºæ™¯
                    setTimeout(() => {
                        game.currentScene++;
                        if (game.currentScene < scenes.length) {
                            loadScene();
                        } else {
                            showFortunePage();
                        }
                    }, 1000);
                });
                
                optionsArea.appendChild(button);
            });
            
            updateStatus();
        }

        // ==================== æ˜¾ç¤ºæ¶ˆæ¯ ====================
        function showMessage(text) {
            const msg = document.getElementById('message');
            msg.textContent = text;
            msg.style.display = 'block';
            
            setTimeout(() => {
                msg.style.display = 'none';
            }, 1500);
        }

        // ==================== æ›´æ–°çŠ¶æ€ ====================
        function updateStatus() {
            document.getElementById('luckValue').textContent = game.luck;
            if (game.language === 'zh') {
                document.getElementById('moneyValue').textContent = `Â¥${game.money}`;
            } else {
                document.getElementById('moneyValue').textContent = `$${game.money}`;
            }
        }

        // ==================== æ˜¾ç¤ºæ–°å¹´ç­¾é¡µé¢ ====================
        function showFortunePage() {
            document.getElementById('gamePage').classList.remove('active');
            document.getElementById('fortunePage').classList.add('active');
            
            drawFortune();
        }

        // ==================== æŠ½å–æ–°å¹´ç­¾ ====================
        function drawFortune() {
            const fortunes = gameImages.fortunes;
            const randomIndex = Math.floor(Math.random() * fortunes.length);
            const fortune = fortunes[randomIndex];
            
            // åŠ è½½æ–°å¹´ç­¾å›¾ç‰‡
            const fortuneImg = document.getElementById('fortuneImage');
            fortuneImg.src = fortune.image;
            fortuneImg.onerror = function() {
                console.log("æ–°å¹´ç­¾å›¾ç‰‡åŠ è½½å¤±è´¥");
                fortuneImg.style.display = 'none';
            };
            fortuneImg.style.display = 'block';
            
             // æ˜¾ç¤ºç¥ç¦è¯­
    const fortuneText = document.getElementById('fortuneText');
    const englishEl = document.getElementById('fortuneEnglish');
    
    // æ¸…ç©ºå¹¶éšè—è‹±æ–‡éƒ¨åˆ†ï¼ˆç¡®ä¿æ²¡æœ‰æ®‹ç•™ï¼‰
    englishEl.textContent = '';
    englishEl.style.display = 'none';
    
    // æ ¹æ®è¯­è¨€æ˜¾ç¤º
    if (game.language === 'zh') {
        // ä¸­æ–‡ç‰ˆï¼šåªæ˜¾ç¤ºä¸­æ–‡
        fortuneText.textContent = fortune.text.zh;
    } else {
        // è‹±æ–‡ç‰ˆï¼šæ˜¾ç¤ºè‹±æ–‡
        fortuneText.textContent = fortune.text.en;
    }
} //
        // ==================== åˆ†äº«åŠŸèƒ½ ==================== //
        function shareFortune() {
            const fortuneText = document.getElementById('fortuneText').textContent;
            const shareMsg = game.language === 'zh' 
                ? `ğŸ´ æˆ‘åœ¨ã€Šå¹¿åºœå¹´å‘³ä¹‹æ—…ã€‹æŠ½åˆ°é©¬å¹´å¥½è¿ç­¾ï¼š${fortuneText}\n\nå¿«æ¥æ‰«ç ä¸€èµ·ä½“éªŒå¹¿ä¸œæ˜¥èŠ‚ä¹ ä¿—å§ï¼`
                : `ğŸ My Year of the Horse fortune: "${fortuneText}"\n\nScan to play Guangdong New Year Journey!`;
            
            if (navigator.share) {
                navigator.share({
                    title: game.language === 'zh' ? 'å¹¿åºœå¹´å‘³ä¹‹æ—…' : 'Guangdong New Year Journey',
                    text: shareMsg
                });
            } else {
                // å¤åˆ¶åˆ°å‰ªè´´æ¿
                navigator.clipboard.writeText(shareMsg).then(() => {
                    showMessage(game.language === 'zh' ? 'å·²å¤åˆ¶åˆ°å‰ªè´´æ¿' : 'Copied to clipboard');
                });
            }
        }

        // ==================== è¿”å›é¦–é¡µ ====================
        function backToHome() {
            document.getElementById('fortunePage').classList.remove('active');
            document.getElementById('languagePage').classList.add('active');
            
            // é‡ç½®æ¸¸æˆ
            game.currentScene = 0;
            game.luck = 88;
            game.money = 0;
            game.happiness = 100;
        }

        // ==================== é¡µé¢åŠ è½½å®Œæˆåå¯åŠ¨ ====================
        window.onload = init;
    </script>
</body>
</html>






